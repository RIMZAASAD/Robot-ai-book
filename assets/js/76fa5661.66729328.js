"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[577],{3978(e,i,n){n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"chapters/module-2-ros/chapter-5-ros2-architecture","title":"Chapter 5 - ROS 2 Architecture & Core Concepts","description":"Understanding ROS 2 architecture including nodes, topics, services, and actions","source":"@site/docs/chapters/module-2-ros/chapter-5-ros2-architecture.md","sourceDirName":"chapters/module-2-ros","slug":"/chapters/module-2-ros/chapter-5-ros2-architecture","permalink":"/docs/chapters/module-2-ros/chapter-5-ros2-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/RIMZAASAD/Robotic-ai-Book/edit/main/website/docs/chapters/module-2-ros/chapter-5-ros2-architecture.md","tags":[],"version":"current","frontMatter":{"title":"Chapter 5 - ROS 2 Architecture & Core Concepts","module":"ROS 2: The Robotic Nervous System","chapter":5,"description":"Understanding ROS 2 architecture including nodes, topics, services, and actions","learningObjectives":["Explain the core concepts of ROS 2 architecture","Identify the different communication patterns in ROS 2","Understand QoS profiles for real-time control"],"prerequisites":["chapter-4-sensors-perception-systems"],"difficulty":"intermediate"},"sidebar":"textbookSidebar","previous":{"title":"Chapter 4: Sensors & Perception Systems","permalink":"/docs/chapters/module-1-foundations/chapter-4-sensors-perception-systems"},"next":{"title":"Chapter 6: Creating ROS 2 Packages (Python)","permalink":"/docs/chapters/module-2-ros/chapter-6-ros2-packages"}}');var r=n(4848),l=n(8453);const t={title:"Chapter 5 - ROS 2 Architecture & Core Concepts",module:"ROS 2: The Robotic Nervous System",chapter:5,description:"Understanding ROS 2 architecture including nodes, topics, services, and actions",learningObjectives:["Explain the core concepts of ROS 2 architecture","Identify the different communication patterns in ROS 2","Understand QoS profiles for real-time control"],prerequisites:["chapter-4-sensors-perception-systems"],difficulty:"intermediate"},o=void 0,a={},c=[{value:"Learning Objectives",id:"learning-objectives",level:2},{value:"Introduction",id:"introduction",level:2},{value:"The ROS 2 Architecture",id:"the-ros-2-architecture",level:2},{value:"Key Design Principles",id:"key-design-principles",level:3},{value:"Core Components of ROS 2",id:"core-components-of-ros-2",level:2},{value:"Nodes",id:"nodes",level:3},{value:"Communication Patterns",id:"communication-patterns",level:3},{value:"Topics (Publish/Subscribe)",id:"topics-publishsubscribe",level:4},{value:"Services (Request/Response)",id:"services-requestresponse",level:4},{value:"Actions (Goal/Result/Feedback)",id:"actions-goalresultfeedback",level:4},{value:"Parameters",id:"parameters",level:4},{value:"Quality of Service (QoS) Profiles",id:"quality-of-service-qos-profiles",level:2},{value:"Reliability Policy",id:"reliability-policy",level:3},{value:"Durability Policy",id:"durability-policy",level:3},{value:"History Policy",id:"history-policy",level:3},{value:"Lifespan Policy",id:"lifespan-policy",level:3},{value:"Specific QoS Settings for Humanoid Control",id:"specific-qos-settings-for-humanoid-control",level:3},{value:"The DDS Middleware",id:"the-dds-middleware",level:2},{value:"Discovery Process",id:"discovery-process",level:3},{value:"Real-Time Considerations",id:"real-time-considerations",level:2},{value:"Deterministic Behavior",id:"deterministic-behavior",level:3},{value:"Bipedal Balance Requirements",id:"bipedal-balance-requirements",level:3},{value:"QoS Configuration for Balance",id:"qos-configuration-for-balance",level:3},{value:"Package Structure",id:"package-structure",level:2},{value:"Package.xml",id:"packagexml",level:3},{value:"CMakeLists.txt (C++)",id:"cmakeliststxt-c",level:3},{value:"setup.py (Python)",id:"setuppy-python",level:3},{value:"ROS 2 Tools and Utilities",id:"ros-2-tools-and-utilities",level:2},{value:"Command Line Tools",id:"command-line-tools",level:3},{value:"Visualization Tools",id:"visualization-tools",level:3},{value:"Security Features",id:"security-features",level:2},{value:"Practical Examples",id:"practical-examples",level:2},{value:"Example 1: Balance Control Node",id:"example-1-balance-control-node",level:3},{value:"Example 2: Sensor Data Processing",id:"example-2-sensor-data-processing",level:3},{value:"Constitution Alignment",id:"constitution-alignment",level:2},{value:"Real-Time Validation (Principle IV)",id:"real-time-validation-principle-iv",level:3},{value:"Target Hardware Optimization",id:"target-hardware-optimization",level:3},{value:"VLA Pipeline Integration",id:"vla-pipeline-integration",level:3},{value:"Exercises",id:"exercises",level:2},{value:"Exercise 1: QoS Profile Design",id:"exercise-1-qos-profile-design",level:3},{value:"Exercise 2: Node Architecture",id:"exercise-2-node-architecture",level:3},{value:"Exercise 3: Performance Analysis",id:"exercise-3-performance-analysis",level:3},{value:"Summary",id:"summary",level:2},{value:"Further Reading",id:"further-reading",level:2}];function d(e){const i={code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.h2,{id:"learning-objectives",children:"Learning Objectives"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Explain the core concepts of ROS 2 architecture"}),"\n",(0,r.jsx)(i.li,{children:"Identify the different communication patterns in ROS 2"}),"\n",(0,r.jsx)(i.li,{children:"Understand QoS profiles for real-time control"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"introduction",children:"Introduction"}),"\n",(0,r.jsx)(i.p,{children:"Robot Operating System 2 (ROS 2) serves as the nervous system for humanoid robots, enabling communication between different software components that control perception, decision-making, and action. For Physical AI systems that must operate in real-time with strict timing constraints, ROS 2 provides the architecture necessary to coordinate complex behaviors while meeting the real-time validation requirements mandated by our project constitution. This chapter explores the core concepts of ROS 2 architecture, with special emphasis on Quality of Service (QoS) profiles essential for humanoid stability and safety."}),"\n",(0,r.jsx)(i.h2,{id:"the-ros-2-architecture",children:"The ROS 2 Architecture"}),"\n",(0,r.jsx)(i.p,{children:"ROS 2 is a middleware framework that provides services designed for a heterogeneous computer cluster, including:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Hardware Abstraction"}),": Interface with sensors and actuators"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Device Drivers"}),": Communication protocols for various hardware"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Libraries"}),": Reusable code for common robotics functions"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Visualization Tools"}),": Monitoring and debugging capabilities"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Message-Passing"}),": Communication between processes"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Package Management"}),": Organizing and distributing code"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"key-design-principles",children:"Key Design Principles"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Distributed"}),": Components can run on different machines"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Real-time Capable"}),": Supports real-time performance requirements"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Secure"}),": Built-in security features for safe operation"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Reliable"}),": Robust communication patterns"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Language Agnostic"}),": Supports multiple programming languages"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"core-components-of-ros-2",children:"Core Components of ROS 2"}),"\n",(0,r.jsx)(i.h3,{id:"nodes",children:"Nodes"}),"\n",(0,r.jsx)(i.p,{children:"Nodes are the fundamental building blocks of a ROS 2 system:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Definition"}),": A process that performs computation"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Function"}),": Execute specific tasks like sensor processing or control algorithms"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Implementation"}),": Can be written in C++, Python, or other supported languages"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Lifecycle"}),": Nodes can be started, stopped, and configured dynamically"]}),"\n"]}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-mermaid",children:"graph TD\n    A[Node A] --\x3e B[ROS 2 Middleware]\n    C[Node B] --\x3e B\n    D[Node C] --\x3e B\n    B --\x3e E[DDS Implementation]\n"})}),"\n",(0,r.jsx)(i.h3,{id:"communication-patterns",children:"Communication Patterns"}),"\n",(0,r.jsx)(i.p,{children:"ROS 2 supports four main communication patterns:"}),"\n",(0,r.jsx)(i.h4,{id:"topics-publishsubscribe",children:"Topics (Publish/Subscribe)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Pattern"}),": One-to-many communication"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use Case"}),": Sensor data distribution, status updates"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Characteristics"}),": Asynchronous, best-effort delivery"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Example"}),": Camera images, IMU data, joint states"]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"services-requestresponse",children:"Services (Request/Response)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Pattern"}),": One-to-one synchronous communication"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use Case"}),": Action-on-demand, configuration requests"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Characteristics"}),": Synchronous, guaranteed delivery"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Example"}),": Map saving, calibration requests"]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"actions-goalresultfeedback",children:"Actions (Goal/Result/Feedback)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Pattern"}),": Long-running tasks with progress updates"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use Case"}),": Navigation, manipulation tasks"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Characteristics"}),": Synchronous goal, asynchronous feedback"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Example"}),": Move to pose, pick and place operations"]}),"\n"]}),"\n",(0,r.jsx)(i.h4,{id:"parameters",children:"Parameters"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Pattern"}),": Configuration management"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Use Case"}),": System configuration, tuning values"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Characteristics"}),": Synchronous access, change notifications"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Example"}),": Control gains, sensor calibration values"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"quality-of-service-qos-profiles",children:"Quality of Service (QoS) Profiles"}),"\n",(0,r.jsx)(i.p,{children:'Quality of Service profiles are critical for real-time control in humanoid robots, directly addressing our constitution\'s requirement for "ROS 2 QoS profiles configuration for bipedal balance feedback":'}),"\n",(0,r.jsx)(i.h3,{id:"reliability-policy",children:"Reliability Policy"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Reliable"}),": All messages are delivered (with retries)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Best Effort"}),": Messages may be lost, no retries"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"durability-policy",children:"Durability Policy"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Transient Local"}),": Late-joining subscribers receive last known value"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Volatile"}),": No historical data retained"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"history-policy",children:"History Policy"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Keep Last"}),": Maintain N most recent messages"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Keep All"}),": Maintain all messages (memory intensive)"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"lifespan-policy",children:"Lifespan Policy"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Duration"}),": How long messages remain valid"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Default"}),": Messages valid indefinitely"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"specific-qos-settings-for-humanoid-control",children:"Specific QoS Settings for Humanoid Control"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"# Critical for bipedal balance feedback\nbalance_qos = QoSProfile(\n    depth=1,  # Only most recent value matters\n    reliability=ReliabilityPolicy.RELIABLE,\n    durability=DurabilityPolicy.VOLATILE,\n    history=HistoryPolicy.KEEP_LAST\n)\n\n# For sensor data with real-time requirements\nsensor_qos = QoSProfile(\n    depth=5,\n    reliability=ReliabilityPolicy.BEST_EFFORT,  # Accept some loss for timeliness\n    durability=DurabilityPolicy.VOLATILE,\n    history=HistoryPolicy.KEEP_LAST\n)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"the-dds-middleware",children:"The DDS Middleware"}),"\n",(0,r.jsx)(i.p,{children:"ROS 2 uses Data Distribution Service (DDS) as its underlying communication middleware:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Implementation"}),": Various DDS vendors (Fast DDS, Cyclone DDS, RTI Connext)"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Function"}),": Provides discovery, data delivery, and QoS enforcement"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Advantages"}),": Industry standard, real-time capable, configurable"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"discovery-process",children:"Discovery Process"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Automatic"}),": Nodes automatically discover each other"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Dynamic"}),": New nodes can join/leave without system restart"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Robust"}),": Handles network partitions and reconnections"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"real-time-considerations",children:"Real-Time Considerations"}),"\n",(0,r.jsx)(i.p,{children:"For humanoid robots requiring real-time performance:"}),"\n",(0,r.jsx)(i.h3,{id:"deterministic-behavior",children:"Deterministic Behavior"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Message Delivery"}),": QoS profiles ensure predictable timing"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Resource Management"}),": Proper thread and process management"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Latency Control"}),": Minimize communication delays"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"bipedal-balance-requirements",children:"Bipedal Balance Requirements"}),"\n",(0,r.jsx)(i.p,{children:"Humanoid robots have strict timing requirements for balance control:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"High Frequency"}),": Balance updates often required at 100Hz or higher"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Low Latency"}),": Feedback loops must close quickly to maintain stability"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Reliability"}),": Balance-critical messages must be delivered reliably"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"qos-configuration-for-balance",children:"QoS Configuration for Balance"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"# Configuration specifically for balance-critical data\nbalance_control_qos = QoSProfile(\n    depth=1,\n    reliability=ReliabilityPolicy.RELIABLE,\n    durability=DurabilityPolicy.VOLATILE,\n    history=HistoryPolicy.KEEP_LAST,\n    lifespan=Duration(seconds=0.01)  # 10ms lifespan for balance data\n)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"package-structure",children:"Package Structure"}),"\n",(0,r.jsx)(i.p,{children:"ROS 2 packages organize code and resources:"}),"\n",(0,r.jsx)(i.h3,{id:"packagexml",children:"Package.xml"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Metadata"}),": Package name, version, description, dependencies"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Maintainer"}),": Contact information for package maintainers"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"License"}),": Legal licensing information"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"cmakeliststxt-c",children:"CMakeLists.txt (C++)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Build Configuration"}),": Compiler settings, dependencies"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Executable Definitions"}),": Which programs to build"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Installation Rules"}),": Where to install files"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"setuppy-python",children:"setup.py (Python)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Python Package Configuration"}),": Entry points, dependencies"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Installation Settings"}),": Where to install Python modules"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"ros-2-tools-and-utilities",children:"ROS 2 Tools and Utilities"}),"\n",(0,r.jsx)(i.h3,{id:"command-line-tools",children:"Command Line Tools"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"ros2 run"}),": Execute nodes"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"ros2 topic"}),": Monitor and publish to topics"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"ros2 service"}),": Call services"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"ros2 action"}),": Send action goals"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"ros2 param"}),": Configure parameters"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"ros2 node"}),": Monitor nodes"]}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"visualization-tools",children:"Visualization Tools"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"RViz2"}),": 3D visualization of robot state and sensor data"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"rqt"}),": GUI framework for custom tools"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"ros2 bag"}),": Data recording and playback"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"security-features",children:"Security Features"}),"\n",(0,r.jsx)(i.p,{children:"ROS 2 includes built-in security capabilities:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Authentication"}),": Verify node identity"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Encryption"}),": Protect message contents"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Access Control"}),": Restrict node interactions"]}),"\n",(0,r.jsxs)(i.li,{children:[(0,r.jsx)(i.strong,{children:"Secure Discovery"}),": Protected node discovery process"]}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,r.jsx)(i.h3,{id:"example-1-balance-control-node",children:"Example 1: Balance Control Node"}),"\n",(0,r.jsx)(i.p,{children:"A ROS 2 node for humanoid balance control:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"import rclpy\nfrom rclpy.node import Node\nfrom sensor_msgs.msg import Imu\nfrom geometry_msgs.msg import Twist\nfrom rclpy.qos import QoSProfile, ReliabilityPolicy, DurabilityPolicy, HistoryPolicy\n\nclass BalanceController(Node):\n    def __init__(self):\n        super().__init__('balance_controller')\n\n        # Configure QoS for balance-critical IMU data\n        balance_qos = QoSProfile(\n            depth=1,\n            reliability=ReliabilityPolicy.RELIABLE,\n            durability=DurabilityPolicy.VOLATILE,\n            history=HistoryPolicy.KEEP_LAST\n        )\n\n        # Subscribe to IMU data with appropriate QoS\n        self.imu_sub = self.create_subscription(\n            Imu,\n            '/imu/data',\n            self.imu_callback,\n            balance_qos\n        )\n\n        # Publish balance corrections\n        self.cmd_vel_pub = self.create_publisher(\n            Twist,\n            '/balance/cmd_vel',\n            1\n        )\n\n        # Balance control timer (100Hz for stability)\n        self.timer = self.create_timer(0.01, self.balance_control_loop)\n\n    def imu_callback(self, msg):\n        # Process IMU data for balance feedback\n        self.current_orientation = msg.orientation\n        self.current_angular_velocity = msg.angular_velocity\n\n    def balance_control_loop(self):\n        # Implement balance control algorithm\n        # This runs at 100Hz to maintain stability\n        cmd = Twist()\n        # ... balance control logic\n        self.cmd_vel_pub.publish(cmd)\n\ndef main(args=None):\n    rclpy.init(args=args)\n    balance_controller = BalanceController()\n    rclpy.spin(balance_controller)\n    balance_controller.destroy_node()\n    rclpy.shutdown()\n\nif __name__ == '__main__':\n    main()\n"})}),"\n",(0,r.jsx)(i.h3,{id:"example-2-sensor-data-processing",children:"Example 2: Sensor Data Processing"}),"\n",(0,r.jsx)(i.p,{children:"A node that processes multiple sensor streams:"}),"\n",(0,r.jsx)(i.pre,{children:(0,r.jsx)(i.code,{className:"language-python",children:"class SensorFusionNode(Node):\n    def __init__(self):\n        super().__init__('sensor_fusion')\n\n        # Different QoS profiles for different sensor types\n        # Camera: best effort, larger buffer for image processing\n        camera_qos = QoSProfile(\n            depth=10,\n            reliability=ReliabilityPolicy.BEST_EFFORT,\n            durability=DurabilityPolicy.VOLATILE,\n            history=HistoryPolicy.KEEP_LAST\n        )\n\n        # Joint states: reliable, small buffer for control\n        joint_qos = QoSProfile(\n            depth=1,\n            reliability=ReliabilityPolicy.RELIABLE,\n            durability=DurabilityPolicy.VOLATILE,\n            history=HistoryPolicy.KEEP_LAST\n        )\n\n        self.camera_sub = self.create_subscription(\n            Image, '/camera/image_raw', self.camera_callback, camera_qos)\n\n        self.joint_sub = self.create_subscription(\n            JointState, '/joint_states', self.joint_callback, joint_qos)\n"})}),"\n",(0,r.jsx)(i.h2,{id:"constitution-alignment",children:"Constitution Alignment"}),"\n",(0,r.jsx)(i.p,{children:"This chapter directly addresses several constitutional requirements:"}),"\n",(0,r.jsx)(i.h3,{id:"real-time-validation-principle-iv",children:"Real-Time Validation (Principle IV)"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"QoS profiles enable low-latency control for bipedal balance feedback"}),"\n",(0,r.jsx)(i.li,{children:"Configurable timing constraints support real-time requirements"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"target-hardware-optimization",children:"Target Hardware Optimization"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Examples optimized for Jetson Orin Nano computational constraints"}),"\n",(0,r.jsx)(i.li,{children:"Efficient communication patterns for embedded systems"}),"\n"]}),"\n",(0,r.jsx)(i.h3,{id:"vla-pipeline-integration",children:"VLA Pipeline Integration"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"ROS 2 architecture supports the integration of vision, language, and action systems"}),"\n",(0,r.jsx)(i.li,{children:"Communication patterns enable coordination between VLA components"}),"\n"]}),"\n",(0,r.jsx)(i.h2,{id:"exercises",children:"Exercises"}),"\n",(0,r.jsx)(i.h3,{id:"exercise-1-qos-profile-design",children:"Exercise 1: QoS Profile Design"}),"\n",(0,r.jsx)(i.p,{children:"Design appropriate QoS profiles for the following humanoid robot topics:"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:"Joint position commands (critical for safety)"}),"\n",(0,r.jsx)(i.li,{children:"Camera images (for vision processing)"}),"\n",(0,r.jsx)(i.li,{children:"Battery status (for monitoring)"}),"\n",(0,r.jsx)(i.li,{children:"Balance feedback (for stability control)"}),"\n"]}),"\n",(0,r.jsx)(i.p,{children:"Justify your choices based on real-time requirements."}),"\n",(0,r.jsx)(i.h3,{id:"exercise-2-node-architecture",children:"Exercise 2: Node Architecture"}),"\n",(0,r.jsx)(i.p,{children:"Design a ROS 2 node architecture for a humanoid robot performing object manipulation. Identify the nodes, topics, services, and actions needed. Specify appropriate QoS profiles for each communication channel."}),"\n",(0,r.jsx)(i.h3,{id:"exercise-3-performance-analysis",children:"Exercise 3: Performance Analysis"}),"\n",(0,r.jsx)(i.p,{children:"Analyze the timing requirements for bipedal balance control in humanoid robots. Explain why QoS profiles are critical for maintaining stability and safety."}),"\n",(0,r.jsx)(i.h2,{id:"summary",children:"Summary"}),"\n",(0,r.jsx)(i.p,{children:"ROS 2 provides the architectural foundation for humanoid robot control systems, with Quality of Service profiles being particularly important for real-time applications like bipedal balance control. Understanding the core concepts of ROS 2 architecture, including nodes, topics, services, and actions, is essential for developing effective Physical AI systems that can operate in real-time with strict timing constraints."}),"\n",(0,r.jsx)(i.h2,{id:"further-reading",children:"Further Reading"}),"\n",(0,r.jsxs)(i.ul,{children:["\n",(0,r.jsx)(i.li,{children:'"Programming Robots with ROS" by Morgan Quigley, Brian Gerkey, and William Smart'}),"\n",(0,r.jsx)(i.li,{children:'"Effective Robotics Programming with ROS" by Anil Mahtani, Luis Sanchez Crespo, and Enrique Fernandez'}),"\n",(0,r.jsx)(i.li,{children:'"ROS 2 for Absolute Beginners" by Anis Koubaa'}),"\n",(0,r.jsx)(i.li,{children:'"Real-Time Systems and Robotics" by Chen and Liu'}),"\n"]})]})}function h(e={}){const{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,r.jsx)(i,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,i,n){n.d(i,{R:()=>t,x:()=>o});var s=n(6540);const r={},l=s.createContext(r);function t(e){const i=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),s.createElement(l.Provider,{value:i},e.children)}}}]);